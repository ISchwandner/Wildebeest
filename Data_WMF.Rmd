---
title: "Data_WildebeestMaraFencing"
author: "Imogen Schwandner -2671952S"
date: '2022-05-02'
output: html_document
---


1. Load libraries

```{r}
library(rgdal)
library(rgeos)
library(sp)
library(raster)
```

2. Read data into project and adjust data structure and re-project where necessary

2.1. Wildebeest data
```{r}
#read data
WB <- read.csv("WB_SNP_2010_2021_forImogen.csv")

#set crs
crs <- CRS("+init=epsg:32736")

#reformat date column as POSIX
WB$datetime <- as.POSIXct(WB$Date, format="%d/%m/%Y %H:%M", tz='GMT')

# Convert time form GMT to local time (East African time)
attributes(WB$datetime)$tzone <- "Africa/Nairobi" 

# project data - convert to spatialpoints df
coordinates(WB) <- ~x+y
proj4string(WB) <- crs

```


Subset into 2010-13 (Stabach) and 2017-21 (Hopcraft) data sets
Remove 3 individuals that migrate far south into the Serengeti.
Write as shapefiles for QGIS.

2.1.1. 2010-2013 Stabach
```{r}
#subset Stabach data only
WBS <- subset(WB, OWNER == "STABACH")

#remove individuals 2834 and 2845
WBS <- subset(WBS, AID != "2834" & AID != "2845")

#write as shapefile
#writeOGR(WBS, dsn='.','WB-2010-2013', driver = "ESRI Shapefile")
```

2.1.2. 2017-2021 Hopcraft
```{r}
#subset Hopcraft data only
WBH <- subset(WB, OWNER == "HOPCRAFT")

#remove W69
WBH <- subset(WBH, AID != "W69")

#write as shapefile
#writeOGR(WBH, dsn='.','WB-2017-2021', driver = "ESRI Shapefile")
```

2.2. Covariates for Habitat Suitability Model

2.2.1. Anthropogenic Risk

```{r}
anthro <- raster("Smithsonian_data/Data/Data_Layers/32736/reprojanth_risk_clp.tif")
```

2.2.2. NDVI

2.2.3. DNDVI

2.2.4. TWI

```{r}
# need to resample TWI to extent and resolution of remaining layers 
anthro <- raster::brick("Smithsonian_data/Data/Data_Layers/32736/reprojanth_risk_clp.tif")
TWI <- raster::brick("Smithsonian_data/Data/TWI/twi_200/hdr.adf")
TWI <- resample(TWI, anthro)

```


2.2.5. Distance to Woody Vegetation

```{r}
D_wood <- raster("Smithsonian_data/Data/Data_Layers/32736/reprojwoody_dst_clp.tif")
```

2.2.6. Distance to Rivers

```{r}
D_river <- raster("Smithsonian_data/Data/Data_Layers/32736/reprojriver_dst_clp.tif")
```

2.2.7. Distance to Primary (T1) and Secondary (T5) Roads

```{r}
D_roadT1 <- raster("Smithsonian_data/Data/Data_Layers/32736/reprojrdt1_dist_clp.tif")
```

```{r}
D_roadT5 <- raster("Smithsonian_data/Data/Data_Layers/32736/reprojrdt5_dist_clp.tif")
```


